/*
 * Plugin Name: Test plugin
 */

 <?php

register_activation_hook(
	__FILE__,
	'test_activate'
);

register_deactivation_hook(
	__FILE__,
	'test_deactivate'
);

function test_activate(){
     add_action('wp_ajax_nopriv_sql', 'test_sql');
}

function test_deactivate(){
    remove_action('wp_ajax_nopriv_sql', 'test_sql');
}

/**
 * Handles my AJAX request.
 */
function test_sql() {
    $the_query = new WP_Query( 't' );
	// Handle the ajax request here

	wp_die(); // All ajax handlers die when finished
}
 ?>